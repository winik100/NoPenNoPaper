{{define "title"}}Neuen Charakter erstellen{{end}}

{{define "main"}}
<form action='/create' method='POST'>
    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
    {{range .Form.GenericErrors}}
        <div class='error'>{{.}}</div>
    {{end}}
    <div id="info">
        <table>
            <tr>
                <td>
                    <label>Name:</label>
                    <input type='text' name='Info.Name' value='{{.Form.Info.Name}}'>
                    {{with .Form.FieldErrors.name}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
            <tr>
                <td>
                    <label>Beruf:</label>
                    <input type='text' name='Info.Profession' value='{{.Form.Info.Profession}}'>
                    {{with .Form.FieldErrors.profession}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
            <tr>
                <td>
                    <label>Alter:</label>
                    <input type='text' name='Info.Age' value='{{.Form.Info.Age}}'>
                    {{with .Form.FieldErrors.age}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
            <tr>
                <td>
                    <label>Geschlecht:</label>
                    <input type='radio' name='Info.Gender' value='männlich' {{if (eq .Form.Info.Gender "männlich")}} checked {{end}} checked> Männlich
                    <input type='radio' name='Info.Gender' value='weiblich' {{if (eq .Form.Info.Gender "weiblich")}} checked {{end}}> Weiblich
                    {{with .Form.FieldErrors.gender}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
            <tr>
                <td>
                    <label>Wohnort:</label>
                    <input type='text' name='Info.Residence' value='{{.Form.Info.Residence}}'>
                    {{with .Form.FieldErrors.residence}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
            <tr>
                <td>
                    <label>Geburtsort:</label>
                    <input type='text' name='Info.Birthplace' value='{{.Form.Info.Birthplace}}'>
                    {{with .Form.FieldErrors.birthplace}}
                        <label class='error'>{{.}}</label>
                    {{end}}
                </td>
            </tr>
        </table>
    </div> 
    <div id="attributes">
        <details>
            <summary>Attribute</summary>
            <p>Zu verteilen: 40, 50, 50, 50, 60, 60, 70, 80</p>
            <table>
                {{$fieldErrors := .Form.FieldErrors}}
                {{range $key, $value := .Form.Attributes.AsMap}}
                <tr>
                    <td>
                        <label>{{$key}}</label>
                        <input type='number' name='{{printf "Attributes.%s" $key}}' min='40' max='80' step='10' {{if (eq $value 0)}} value='' {{else}} value='{{$value}}' {{end}}>
                        {{with (index $fieldErrors $key)}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                </tr>
                {{end}}
                <!-- <tr>
                    <td>
                        <label>ST</label>
                        <input type='number' name='Attributes.ST' min='40' max='80' step='10' {{if (eq .Form.Attributes.ST 0)}} value='' {{else}} value='{{.Form.Attributes.ST}}' {{end}}>
                        {{with .Form.FieldErrors.st}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                    <td>
                        <label>GE</label>
                        <input type='number' name='Attributes.GE' min='40' max='80' step='10' {{if (eq .Form.Attributes.GE 0)}} value='' {{else}} value='{{.Form.Attributes.GE}}' {{end}}>
                        {{with .Form.FieldErrors.ge}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                    <td>
                        <label>MA</label>
                        <input type='number' name='Attributes.MA' min='40' max='80' step='10' {{if (eq .Form.Attributes.MA 0)}} value='' {{else}} value='{{.Form.Attributes.MA}}' {{end}}>
                        {{with .Form.FieldErrors.ma}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <label>KO</label>
                        <input type='number' name='Attributes.KO' min='40' max='80' step='10' {{if (eq .Form.Attributes.KO 0)}} value='' {{else}} value='{{.Form.Attributes.KO}}' {{end}}>
                        {{with .Form.FieldErrors.ko}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                    <td>
                        <label>ER</label>
                        <input type='number' name='Attributes.ER' min='40' max='80' step='10' {{if (eq .Form.Attributes.ER 0)}} value='' {{else}} value='{{.Form.Attributes.ER}}' {{end}}>
                        {{with .Form.FieldErrors.er}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                    <td>
                        <label>BI</label>
                        <input type='number' name='Attributes.BI' min='40' max='80' step='10' {{if (eq .Form.Attributes.BI 0)}} value='' {{else}} value='{{.Form.Attributes.BI}}' {{end}}>
                        {{with .Form.FieldErrors.bi}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <label>GR</label>
                        <input type='number' name='Attributes.GR' min='40' max='80' step='10' {{if (eq .Form.Attributes.GR 0)}} value='' {{else}} value='{{.Form.Attributes.GR}}' {{end}}>
                        {{with .Form.FieldErrors.gr}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td>
                    <td>
                        <label>IN</label>
                        <input type='number' name='Attributes.IN' min='40' max='80' step='10' {{if (eq .Form.Attributes.IN 0)}} value='' {{else}} value='{{.Form.Attributes.IN}}' {{end}}>
                        {{with .Form.FieldErrors.in}}
                            <label class='error'>{{.}}</label>
                        {{end}}
                    </td> -->
                    <td>
                        <input type='hidden' name='Attributes.BW' value='8'>
                    </td>
                </tr>
            </table>
        </details>
    </div>
    <div>
        <details>
        <summary>Fertigkeiten</summary>
        <p>Zu verteilen: 40, 40, 40, 50, 50, 50, 60, 60, 70</p>
        <p>Einer der 9 Werte muss auf Finanzkraft verwendet werden!</p>
            <table>
                {{range $key, $value := .Form.Skills.AsMap}}
                {{$tkey := (translate $key)}}
                <tr>
                    <td>
                        <label>{{$key}}</label>
                        <input id='{{$tkey}}' type='number' name='{{printf "Skills.%s" $tkey}}' min='40' max='80' step='10' value='{{$value}}' readonly>
                        <input id='{{printf "%sEdit" $tkey}}' type='checkbox'>
                    </td>
                </tr>
                {{end}}
            </table>
        </details>
    </div>
    <div>
        <input type="submit" value="Charakter erstellen">
    </div>
</form>
{{end}}